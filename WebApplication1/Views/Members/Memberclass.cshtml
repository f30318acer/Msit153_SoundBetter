@model IEnumerable<prjMusicBetter.Models.TClass>
@{
	ViewData["Title"] = "Memberclass";
}
<style>
	.ddd {
		border-bottom: 2px solid #fc0254;
	}

	.btm {
		height: 60px;
		min-width: 167px;
		right: 0;
		top: 0;
		border: none;
		border-radius: 80px;
		color: #fff;
		font-size: 15px;
		background: #fc0254;
		float: right;
	}

	.title {
		display: inline-block;
		margin: 10px;
		vertical-align: middle;
	}

	.form-container {
		float: right;
		margin: 10px;
	}

	.title-container {
		display: flex;
	}

	.section-title {
		min-width: 100%; /* 或者您認為適合的最小寬度值 */
	}

</style>
<section class="playlist-section spad">
	<div class="container-fluid">
		<div class="section-title">
			<div class="section-title">
				<h2 class="title">我的課程</h2>
				<form asp-controller="Class" asp-action="Createclass" method="get" class="form-container">
					<button name="createClass" class="btm">新建課程</button>
				</form>
			</div>
			<div class="container-fluid filter-row-container d-flex align-items-center ddd py-4 py-xl-2 px-4 px-lg-5">
				<div class="filter-row">
					<form class="search-form">
						<input type="text" placeholder="輸入課程名稱">
						<button>找尋課程</button>
					</form>
				</div>
			</div>
		</div>
		<div class="clearfix"></div>
		<div id ="divList" class="row playlist-area">
			@*@foreach (var item in Model)
			{
				<div class="mix col-lg-3 col-md-4 col-sm-6 genres">
					<a asp-area="" asp-controller="Class" asp-action="Viewclass" asp-route-id="@item.FClassId">
						<div class="playlist-item">
							<img src="~/img/classimg/1.jpg" alt="">
							<h5>@Html.DisplayFor(modelItem => item.FClassName)</h5>
						</div>
					</a>
				</div>
			}*@
			<!--List內容-->
		</div>
	</div>
</section>
<!-- Playlist section end -->
@section Scripts{
	<script>
		function load() {
			const divList = $('#divList')
			//讀取Json資料
			$.getJSON('/apiTClass/QueryByMember/?id=@(ViewBag.MemberId)', function (datas) {
				console.log(datas);

				//做出一個空的容器來存放div
				const docFrag = $(document.createDocumentFragment())

				//讀出每個Json物件
				$.each(datas, function (index, item) {
					//const descriSub = item.fDescription.length > 15 ? item.fDescription.substring(0, 15) + '...' : item.fDescription;
					const card = $(
						`<div class="mix col-lg-3 col-md-4 col-sm-6 genres">
								<a href="/Class/Edit?id=${item.fClassId}">
										<div class="playlist-item">
											<img src="/img/classimg/${item.fThumbnailPath}?@DateTime.Now.Ticks" alt="">
											<h5>${item.fClassName}</h5>
										</div>
									</a>
								</div>`);
					docFrag.append(card);//.append()將一筆div放入容器中
				})
				divList.html(docFrag)//.html()一次將全部的資料都上傳
			})
		}
		load();
	</script>
}