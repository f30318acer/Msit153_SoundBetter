
@{
    ViewData["Title"] = "List";
}

<!-- Blog section -->
<style>
    .text-container {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .expanded {
        white-space: normal;
        overflow: visible;
        text-overflow: unset;
    }
</style>
<section class="playlist-section spad">
    <div class="container-fluid">
        <div class="row mb-4">
            <div class="section-title col-lg-3">
                <h2>音樂文章</h2>
            </div>
            <div class="container col-lg-9">
                <div class="text-right">
                    <input type="text" name="keywords" placeholder="文章" />
                    <button type="button" class="btn btn-secondary">搜尋</button>
                    <a href="~/Article/Create" type="button" class="btn btn-success">新增文章</a>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
        <div id="divList" class="row playlist-area">
            <!--List內容-->
        </div>
        <div id="pagination-container"></div>
    </div>
</section>

@section Scripts{
    <script>
        function load() {
            const divList = $('#divList')
            $.getJSON('/apiTArticle/List', function (datas) {
                console.log(datas);
                const docFrag = $(document.createDocumentFragment())
                $.each(datas, function (index, item) {
                    const descriSub = item.fContent.length > 15 ? item.fContent.substring(0, 15) + '...' : item.fContent;
                    const card = $(
                        `<a  href="/Article/List" class="mix col-lg-3 col-md-4 col-sm-6" >
                                            <div class="playlist-item">
                                                <img src="/img/blog/11.jpg" alt = "" >
                                                        <h5>${item.fTitle}</h5>
                                                <p>${descriSub}</p>
                                            </div>
                                        </a>`);
                    console.log(card);
                    docFrag.append(card);
                })
                divList.html(docFrag)
            })
        }
        load();
    </script>
}
